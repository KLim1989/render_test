<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>FirebaseUI Debug Example</title>
    <!-- Подключение Firebase и FirebaseUI -->
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/6.1.0/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.1.0/firebase-ui-auth.css" />
</head>
<body>
<h1>FirebaseUI Login</h1>

<script type="text/javascript">
    // Конфигурация Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyBodTVXEUFLFtA1Hi4Y7Ut6VHz6mEezlKs",
        authDomain: "co-mobile-docs.firebaseapp.com",
        projectId: "co-mobile-docs",
        storageBucket: "co-mobile-docs.appspot.com",
        messagingSenderId: "378184527150",
        appId: "1:378184527150:web:45095a844ab3ffe35c5ebf"
    };

    // Инициализация Firebase
    firebase.initializeApp(firebaseConfig);

    // Конфигурация FirebaseUI
    const uiConfig = {
        signInSuccessUrl: '/protected.html',
        signInFlow: 'popup',
        signInOptions: [
            firebase.auth.GoogleAuthProvider.PROVIDER_ID,
        ],
        callbacks: {
            // Вызов при успешной авторизации
            signInSuccessWithAuthResult: (authResult, redirectUrl) => {
                console.log("Sign-in successful!");
                console.log("User details:", authResult.user);
                console.log("Redirect URL:", redirectUrl);
                return false;
            },
            // Вызов при отображении интерфейса
            uiShown: () => {
                console.log("FirebaseUI shown.");
            },
            // Вызов при ошибке
            signInFailure: (error) => {
                console.error("Sign-in failure:", error);
                return Promise.resolve();
            }
        }
    };

    // Инициализация FirebaseUI
    const ui = new firebaseui.auth.AuthUI(firebase.auth());
    ui.start('#firebaseui-auth-container', uiConfig);
</script>
</body>
</html>
